# Default values for linktree application

# Environment (dev, staging, prod)
environment: production

# Backend (API)
backend:
  enabled: true
  replicaCount: 3

  image:
    repository: ghcr.io/periclesanfe/linktree-backend
    pullPolicy: IfNotPresent
    tag: ""  # Defaults to chart appVersion if not set
    pullSecrets: []
    # - name: ghcr-secret

  service:
    type: ClusterIP
    port: 8000
    targetPort: 8000
    annotations: {}

  config:
    nodeEnv: production
    corsOrigin: "*"
    port: 8000

  # Secret Ãºnico contendo todas as credenciais (JWT_SECRET, DB_USER, DB_PASSWORD)
  secretName: "linktree-secrets"

  database:
    host: "linktree-infrastructure-postgresql-rw"
    port: "5432"
    database: "linktree_db"

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  livenessProbe:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  podDisruptionBudget:
    enabled: false
    minAvailable: 1

  nodeSelector: {}
  tolerations: []
  affinity: {}

  nameOverride: ""
  fullnameOverride: ""

# Frontend (SPA)
frontend:
  enabled: true
  replicaCount: 3

  image:
    repository: ghcr.io/periclesanfe/linktree-frontend
    pullPolicy: IfNotPresent
    tag: ""  # Defaults to chart appVersion if not set
    pullSecrets: []
    # - name: ghcr-secret

  service:
    type: ClusterIP
    port: 80
    targetPort: 80
    annotations: {}

  config:
    apiUrl: "http://linktree-backend:8000"

  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

  livenessProbe:
    httpGet:
      path: /
      port: 80
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /
      port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  podDisruptionBudget:
    enabled: false
    minAvailable: 1

  nodeSelector: {}
  tolerations: []
  affinity: {}

  nameOverride: ""
  fullnameOverride: ""
