# Development environment values for linktree.
# This file overrides values.yaml for the dev environment.

environment: development

# Backend configuration for dev
backend:
  replicaCount: 1
  
  image:
    repository: linktree-backend
    pullPolicy: Never
    tag: "local"
  
  service:
    type: ClusterIP
    port: 8000
  
  corsOrigin: "http://localhost:3000,http://localhost:5173,http://linktree-dev.local"
  
  resources:
    limits:
      cpu: 300m
      memory: 384Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Frontend configuration for dev
frontend:
  replicaCount: 1
  
  image:
    repository: linktree-frontend
    pullPolicy: Never
    tag: "local"
  
  service:
    type: ClusterIP
    port: 80
  
  apiUrl: "http://linktree-backend:8000"
  
  resources:
    limits:
      cpu: 150m
      memory: 192Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Database configuration for dev
database:
  external: true
  host: "linktree-dev-postgresql-rw"
  port: "5432"
  database: "linktree_db"
  user: "linktree_dev_user"
  password: "dev_password_123"  # TODO: Move to sealed secret or external secret
  
  migration:
    enabled: true
    resources:
      limits:
        cpu: 150m
        memory: 192Mi
      requests:
        cpu: 50m
        memory: 64Mi

# Authentication for dev
auth:
  jwtSecret: "dev-jwt-secret-key-not-for-production"

# Ingress for dev (optional)
ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
  hosts:
    - host: linktree-dev.local
      paths:
        - path: /
          pathType: Prefix
          backend: frontend
        - path: /api
          pathType: Prefix
          backend: backend
  tls: []
