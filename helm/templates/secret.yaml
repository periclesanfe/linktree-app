apiVersion: v1
kind: Secret
metadata:
  name: {{ include "linktree.fullname" . }}-db-secret
  labels:
    {{- include "linktree.labels" . | nindent 4 }}
type: Opaque
stringData:
  POSTGRES_USER: {{ .Values.database.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.database.password | quote }}
  POSTGRES_DB: {{ .Values.database.database | quote }}
  DATABASE_URL: {{ printf "postgresql://%s:%s@%s:%s/%s" .Values.database.user .Values.database.password .Values.database.host (.Values.database.port | toString) .Values.database.database | quote }}
  JWT_SECRET: {{ .Values.auth.jwtSecret | default "change-me-in-production" | quote }}
